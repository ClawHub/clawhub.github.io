<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>ClawHub的技术分享 - 好好学习 天天向上</title><meta name="author" content="ClawHub"><meta name="copyright" content="ClawHub"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="ClawHub的技术分享，记录学习中的点点滴滴！">
<meta property="og:type" content="website">
<meta property="og:title" content="ClawHub的技术分享">
<meta property="og:url" content="https://clawhub.github.io/page/12/index.html">
<meta property="og:site_name" content="ClawHub的技术分享">
<meta property="og:description" content="ClawHub的技术分享，记录学习中的点点滴滴！">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/clawhub/image/blog/avatar.gif">
<meta property="article:author" content="ClawHub">
<meta property="article:tag" content="java">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/clawhub/image/blog/avatar.gif"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/clawhub/image/blog/favicon-32x32-clawhub.png"><link rel="canonical" href="https://clawhub.github.io/page/12/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: {"appId":"GOOBOT5XB8","apiKey":"68084d3bd15b2455050d3030780a5821","indexName":"clawhub-blog-search","hits":{"per_page":6},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'ClawHub的技术分享',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2023-10-12 21:08:20'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://cdn.jsdelivr.net/gh/clawhub/image/blog/avatar.gif" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">377</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">62</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">44</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/clawhub/image/diffuser/blog/19/11/30/e1eb1cc50aa0a5a2fcdbf929152dbbef.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="ClawHub的技术分享"><span class="site-name">ClawHub的技术分享</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">ClawHub的技术分享</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/clawhub" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:clawhub@163.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2019/11/21/%E6%95%B0%E6%8D%AE%E5%BA%93/Mysql/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Mysql%E3%80%90%E4%B8%89%E3%80%91InnoDB%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/" title="深入了解Mysql【三】InnoDB体系结构"><img class="post-bg" src="https://cdn.jsdelivr.net/gh/clawhub/image/diffuser/top/19/11/27/fdfb9e156ad0cacdf80892cccf394b4c.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="深入了解Mysql【三】InnoDB体系结构"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/11/21/%E6%95%B0%E6%8D%AE%E5%BA%93/Mysql/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Mysql%E3%80%90%E4%B8%89%E3%80%91InnoDB%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/" title="深入了解Mysql【三】InnoDB体系结构">深入了解Mysql【三】InnoDB体系结构</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-11-21T11:38:59.000Z" title="发表于 2019-11-21 19:38:59">2019-11-21</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/mysql/">mysql</a></span></div><div class="content">整合几个资料，自己画的InnoDB体系图：
本篇文章主要内容就是介绍这张图中的所有内容。由图可知，InnoDB存储引擎主要由两部分组成：后台线程和内存池。使用多线程的作用就是能充分发挥现在计算机的性能，而内存池的使用是为了解决CPU与磁盘速度不匹配的问题，下面分别介绍。
1、后台线程主要作用是负责刷新内存池中的数据，保证缓冲池中的内存缓存的是最近的数据。此外，将已修改的数据文件刷新到磁盘文件，同时保证在数据库发生异常情况下InnoDB能恢复到正常的运行状态。
1.1、Master Thread负责将缓冲池中的数据异步刷新到磁盘，保证数据的一致性，包括脏页的刷新，合并插入缓存，undo log页的回收。
1.2、IO ThreadInnoDB用了大量的异步IO处理IO请求，IO Thread主要负责处理这些请求的回掉，包括10个线程，分别为4个write、4个read、1个insert buffer、1个log Thread，分别负责读写请求的IO回调、insert buffer、重做日志。
1.3、Purge Thread事务提交后，需要回收undo log，Purge Thread就 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2019/11/21/%E6%95%B0%E6%8D%AE%E5%BA%93/Mysql/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Mysql%E3%80%90%E4%BA%8C%E3%80%91%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E%E7%9A%84%E6%AF%94%E8%BE%83/" title="深入了解Mysql【二】存储引擎的比较"><img class="post-bg" src="https://cdn.jsdelivr.net/gh/clawhub/image/diffuser/top/19/11/27/8f16406559c63bf94f832b75189081d1.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="深入了解Mysql【二】存储引擎的比较"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/11/21/%E6%95%B0%E6%8D%AE%E5%BA%93/Mysql/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Mysql%E3%80%90%E4%BA%8C%E3%80%91%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E%E7%9A%84%E6%AF%94%E8%BE%83/" title="深入了解Mysql【二】存储引擎的比较">深入了解Mysql【二】存储引擎的比较</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-11-21T11:37:59.000Z" title="发表于 2019-11-21 19:37:59">2019-11-21</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/mysql/">mysql</a></span></div><div class="content">Mysql中插件式存储引擎是一个很重要的特点，存储引擎决定了如何存储和索引数据，是否使用事务等。
查看Mysql支持的存储引擎mysql提供了多种存储引擎，我使用的mysql版本为5.7.23-log,其支持的存储引擎有：图中，默认的存储引擎是InnoDB；其中Transactions表示是否支持事务；XA表示是否支持分布式XA规范；Savepoints表示是否支持事务保存点；
Mysql常用存储引擎
这里简单的介绍几个存储引擎。
InnoDB存储引擎
InnoDB存储引擎支持事务，使用行级锁设计，也支持外键（虽然很少用外键）；
InnoDB使用多版本并发控制（MVCC）来获得高并发性，并且实现了SQL标准的4中隔离级别，默认为repeatable read(允许幻读)。
对于表中数据的存储，InnoDB存储引擎采用了聚集的方式，因此每张表的存储都是按主键的顺序进行存放，如果没有显式的在表定义时指定主键，其会为每一行生成6字节的ROWID作为主键。

MyISAM存储引擎
MyISAM存储引擎不支持事务、表锁设计，支持全文索引，面向OLAP数据库应用，比如数据仓库。
MyISAM存储引 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2019/11/21/%E6%95%B0%E6%8D%AE%E5%BA%93/Mysql/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Mysql%E3%80%90%E4%B8%80%E3%80%91Mysql%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/" title="深入了解Mysql【一】Mysql体系结构"><img class="post-bg" src="https://cdn.jsdelivr.net/gh/clawhub/image/diffuser/top/19/11/27/760d800222e84c91a95a993cd7edff21.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="深入了解Mysql【一】Mysql体系结构"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/11/21/%E6%95%B0%E6%8D%AE%E5%BA%93/Mysql/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Mysql%E3%80%90%E4%B8%80%E3%80%91Mysql%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/" title="深入了解Mysql【一】Mysql体系结构">深入了解Mysql【一】Mysql体系结构</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-11-21T11:36:59.000Z" title="发表于 2019-11-21 19:36:59">2019-11-21</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/mysql/">mysql</a></span></div><div class="content">1、Mysql体系结构在深入了解Mysql的技术之前，先看一下Mysql的体系结构，在网上找了一幅图，没找到具体的出处：
由图可知，Mysql体系分为4层：连接层、Mysql服务、存储引擎、具体的文件系统。
1.1、连接层包括了各种语言的驱动代码，用来和mysql进行交互。
1.2、Mysql服务包括6个模块：连接池、管理服务和工具组件、SQL接口、解析器、优化器、缓存。

1、连接池管理用户的连接，池化技术都是为了节省资源。
2、管理服务和工具组件一些工具，比如备份恢复、Mysql复制、集群。
3、SQL接口接受用户的SQL命令，并返回用户需要的结果。
4、解析器解析SQL，做一些权限校验，语法结构检测解析。
5、优化器对查询进行优化，将SQL语句改成机器最喜欢的样子。
6、缓存如果查询命中缓存，则直接返回，不再进行后续的物理查找。

1.3、存储引擎管理数据的引擎，数据在关系型数据库中是以表的形式存储，所以存储引擎也是以表来定义，一个库中，每个表的类型可以不同。插件式存储引擎也成为表类型，常用的如InnoDB、MyISAM等。
1.4、底层文件系统底层物理文件包括了日志文件、数据文 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2019/11/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C/%E8%81%8A%E8%81%8A%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8F%8A%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/" title="聊聊计算机网络及网络协议"><img class="post-bg" src="https://cdn.jsdelivr.net/gh/ClawHub/image/image/photo-1695349092545-b958d22f9d7c%3Fcrop%3Dentropy%26cs%3Dtinysrgb%26fit%3Dcrop%26fm%3Djpg%26h%3D900%26ixid%3DMnwxfDB8MXxyYW5kb218MHxjb2xsZWN0aW9uaWR8fHx8fHx8MTY5NzAzMDU2Mw%26ixlib%3Drb-4.0.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="聊聊计算机网络及网络协议"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/11/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C/%E8%81%8A%E8%81%8A%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8F%8A%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/" title="聊聊计算机网络及网络协议">聊聊计算机网络及网络协议</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-11-14T06:15:57.000Z" title="发表于 2019-11-14 14:15:57">2019-11-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%BD%91%E7%BB%9C/">网络</a></span></div><div class="content">一次网页请求的整个过程当我们在浏览器的地址栏输入了URL，按下Enter之后发生了什么呢？
DNS解析什么是DNS解析？公司的网络经常可以发微信钉钉，但是就是访问不了网页，这是为什么？
客户端发起TCP连接请求客户端发起HTTP请求服务端负载均衡服务端响应HTTP请求服务端关闭TCP连接浏览器渲染网络协议什么是协议？协议三要素
语法，就是这一段内容要符合一定的规则和格式。例如，括号要成对，结束要使用分号 等。
语义，就是这一段内容要代表某种意义。例如数字减去数字是有意义的，数字减去文本一 般来说就没有意义。
顺序，就是先干啥，后干啥。例如，可以先加上某个数值，然后再减去某个数值。


网络体系结构经常听说OSI七层网络模型、TCP&#x2F;IP四层模型、五层模型，他们之间有什么区别呢？

以上分别对应TCP&#x2F;IP四层模型、五层模型、OSI七层模型



OSI七层模型OSI（Open System Interconnect），即开放式系统互联。 一般都叫OSI参考模型，是ISO（国际标准化组织）组织在1985年研究的网络互连模型。
​    ISO为了更好的使网络应用更为普 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2019/10/16/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Redis%E3%80%90%E4%BA%8C%E5%8D%81%E3%80%91%E7%BC%93%E5%AD%98%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8F%8C%E5%86%99%E4%B8%80%E8%87%B4%E6%80%A7%E9%97%AE%E9%A2%98/" title="深入了解Redis【二十】缓存和数据库双写一致性问题"><img class="post-bg" src="https://cdn.jsdelivr.net/gh/clawhub/image/diffuser/top/19/11/27/ad76eacf03204b27ae43ca8a779c1633.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="深入了解Redis【二十】缓存和数据库双写一致性问题"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/10/16/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Redis%E3%80%90%E4%BA%8C%E5%8D%81%E3%80%91%E7%BC%93%E5%AD%98%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8F%8C%E5%86%99%E4%B8%80%E8%87%B4%E6%80%A7%E9%97%AE%E9%A2%98/" title="深入了解Redis【二十】缓存和数据库双写一致性问题">深入了解Redis【二十】缓存和数据库双写一致性问题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-10-16T15:10:57.000Z" title="发表于 2019-10-16 23:10:57">2019-10-16</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/redis/">redis</a></span></div><div class="content">引言缓存与数据库双写一致性问题在以前自己做的Go项目《旅行记账》app的时候学习过，也整理了文档：数据库、缓存双写一致性方案简单的介绍了一下Cache Aside Pattern

失效应用程序先从cache中取数据，没有得到（数据带失效时间），则从数据库中取数据，成功后，放入缓存。
命中应用程序从cache中取数据，取到数据后返回。
更新先将数据更新到数据库中，成功后，再将缓存数据清除。

这个套路有个问题：在并发操作的时候，假设缓存刚刚失效。有个线程A,从库中获取到旧的值，并刷缓存；线程B更新值，并清除缓存。这种情况，肯定会出现脏读。
但是数据库的读操作比写操作快的多，即A线程大多数情况下比B线程先操作结束，即先程序写缓存在大多数情况下肯定是优先于B线程删除缓存，最终，缓存中没有数据，其他线程缓存脏读的几率很小。
还有个问题：更新操作，删除缓存那一步失败了，怎么处理，肯定不能等着下一波更新或者缓存超时，应该引入重试机制：如果缓存删除失败，将key放入队列，由专门的线程处理重试。

</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2019/10/16/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Redis%E3%80%90%E5%8D%81%E4%B9%9D%E3%80%91%E7%BC%93%E5%AD%98%E5%B9%B6%E5%8F%91%E4%B9%8Bkey%E7%AB%9E%E4%BA%89%E4%B8%8E%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F%E3%80%81%E5%87%BB%E7%A9%BF%E3%80%81%E9%9B%AA%E5%B4%A9%E9%97%AE%E9%A2%98/" title="深入了解Redis【十九】缓存并发之key竞争与缓存穿透、击穿、雪崩问题"><img class="post-bg" src="https://cdn.jsdelivr.net/gh/clawhub/image/diffuser/top/19/11/27/fb942db0aa2ab7040bc846b1220d233f.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="深入了解Redis【十九】缓存并发之key竞争与缓存穿透、击穿、雪崩问题"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/10/16/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Redis%E3%80%90%E5%8D%81%E4%B9%9D%E3%80%91%E7%BC%93%E5%AD%98%E5%B9%B6%E5%8F%91%E4%B9%8Bkey%E7%AB%9E%E4%BA%89%E4%B8%8E%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F%E3%80%81%E5%87%BB%E7%A9%BF%E3%80%81%E9%9B%AA%E5%B4%A9%E9%97%AE%E9%A2%98/" title="深入了解Redis【十九】缓存并发之key竞争与缓存穿透、击穿、雪崩问题">深入了解Redis【十九】缓存并发之key竞争与缓存穿透、击穿、雪崩问题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-10-16T15:10:43.000Z" title="发表于 2019-10-16 23:10:43">2019-10-16</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/redis/">redis</a></span></div><div class="content">引言简单的使用redis的缓存功能是比较容易的，比如计数或者存储个配置信息，但是当并发数上来的时候，就会出现一些列的问题，比如题目中出现的key竞争，缓存穿透、缓存击穿、缓存雪崩，下面分别描述一下，并简答的给出解决方案。
1、key并发竞争1.1、问题描述当多个系统去set同一个key时，可能本来应该先到的值，后到了，导致了数据版本不一致；又或者是多个系统去同时获取一个key，修改值之后再写回redis，只要顺序错了，数据就错了。
1.2、解决办法可以使用时间戳作为版本号，但是这种情况也会有个别机器系统时间回调，时间不确定的问题，也可以使用队列，将并行改为串行。
2、缓存穿透2.1、问题描述大量不存在的key查询，越过缓存，查询数据库，一些恶意攻击等造成大量未命中（缓存和数据库均未命中）。
2.2、解决办法在缓存层之前增加一道过滤屏障，存储所有数据库中目前存在的所有key。可以采用布隆过滤器，虽说会有误报的问题，但也能有很大作用。
3、缓存击穿3.1、问题描述高并发情况下，某一个key失效（缓存时间过期），造成大量的数据库查询操作。
3.2、解决办法热点key永久缓存（不设置缓存过期时 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2019/10/16/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Redis%E3%80%90%E5%8D%81%E5%85%AB%E3%80%91%E4%B8%80%E8%87%B4%E6%80%A7Hash%E7%AE%97%E6%B3%95%E5%9C%A8Jedis%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8/" title="深入了解Redis【十八】一致性Hash算法在Jedis客户端中的应用"><img class="post-bg" src="https://cdn.jsdelivr.net/gh/clawhub/image/diffuser/top/19/11/27/59f203cb0f62c98af325fa065254eb42.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="深入了解Redis【十八】一致性Hash算法在Jedis客户端中的应用"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/10/16/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Redis%E3%80%90%E5%8D%81%E5%85%AB%E3%80%91%E4%B8%80%E8%87%B4%E6%80%A7Hash%E7%AE%97%E6%B3%95%E5%9C%A8Jedis%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8/" title="深入了解Redis【十八】一致性Hash算法在Jedis客户端中的应用">深入了解Redis【十八】一致性Hash算法在Jedis客户端中的应用</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-10-16T15:10:29.000Z" title="发表于 2019-10-16 23:10:29">2019-10-16</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/redis/">redis</a></span></div><div class="content">引言一致性hash算法用于在集群环境中，使得节点的增加或者减少对于整个集群中的数据来说影响返回达到最小。
一致性hash算法一致性hash算法将整个hash值空间组成一个虚拟的环，整个空间按照顺时针方向组织。算法简答描述：盗图：一致性哈希算法原理假设hash值空间为32位无符号整型，整个hash空间如图：

服务器节点的位置确定将服务器节点通过名称进行hash，这样每台服务器节点都能座落到hash环上（假设4个节点），如图：

数据对象的位置确定如果有数据过来，使用与服务器节点相同的hash算法，将key定位到hash环上，从这个位置沿着hash环顺时针查找，第一个遇到的服务器节点就是其归属服务器。假设有4个数据，经过计算后，在环上的位置如下：

容错性假设其中的一个节点宕机，则受影响的数据仅仅是次服务器到其逆时针查找遇到的第一台服务器之间的数据，其他不受影响，如图：

扩展性假设增加一台服务器，则受影响的仅仅是新加入的服务器到其逆时针查找遇到的第一台服务器之间的数据，其他不受影响，如图：

数据倾斜问题与虚拟节点假设有两个服务器节点，其分布图如下：

当数据分布不均匀时，容易数据倾斜 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2019/10/16/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Redis%E3%80%90%E5%8D%81%E4%B8%83%E3%80%91Redisson%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E5%8E%9F%E7%90%86%E4%B8%8ERedLock%E7%AE%97%E6%B3%95/" title="深入了解Redis【十七】Redisson分布式锁原理与RedLock算法"><img class="post-bg" src="https://cdn.jsdelivr.net/gh/clawhub/image/diffuser/top/19/11/27/ecb6cfdb674472dd6994960a18a13294.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="深入了解Redis【十七】Redisson分布式锁原理与RedLock算法"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/10/16/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Redis%E3%80%90%E5%8D%81%E4%B8%83%E3%80%91Redisson%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E5%8E%9F%E7%90%86%E4%B8%8ERedLock%E7%AE%97%E6%B3%95/" title="深入了解Redis【十七】Redisson分布式锁原理与RedLock算法">深入了解Redis【十七】Redisson分布式锁原理与RedLock算法</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-10-16T15:10:16.000Z" title="发表于 2019-10-16 23:10:16">2019-10-16</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/redis/">redis</a></span></div><div class="content">1、从一个问题开始问题：假设设置失效时间10秒，如果由于某些原因导致10秒还没执行完任务，这时候锁自动失效，导致其他线程也会拿到分布式锁，怎么处理？答：Redisson内部提供了一个监控锁的看门狗，它的作用是在Redisson实例被关闭前，不断的延长锁的有效期。
2、分布式锁的要求
互斥性任意时刻只能有一个客户端拥有锁，不能同时多个客户端获取
安全性锁只能被持有该锁的用户删除，而不能被其他用户删除
死锁获取锁的客户端因为某些原因而宕机，而未能释放锁，其他客户端无法获取此锁，需要有机制来避免该类问题的发生
容错当部分节点宕机，客户端仍能获取锁或者释放锁

3、Redisson实现的分布式锁具体使用可以参考Redisson官方文档这里贴上我简单使用的例子：
3.1、pom我使用的是springboot，所以直接用了redisson提供的集成包。
12345&lt;dependency&gt;    &lt;groupId&gt;org.redisson&lt;/groupId&gt;    &lt;artifactId&gt;redisson-spring-boot-starter&lt; ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2019/10/16/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Redis%E3%80%90%E5%8D%81%E5%85%AD%E3%80%91%E9%9B%86%E7%BE%A4%E6%9C%BA%E5%88%B6%E4%B9%8B%E6%A7%BD%E6%8C%87%E6%B4%BE%E3%80%81%E9%87%8D%E6%96%B0%E5%88%86%E7%89%87%E3%80%81%E6%95%85%E9%9A%9C%E8%BD%AC%E7%A7%BB%E3%80%81%E4%B8%BB%E8%8A%82%E7%82%B9%E9%80%89%E4%B8%BE/" title="深入了解Redis【十六】集群机制之槽指派、重新分片、故障转移、主节点选举"><img class="post-bg" src="https://cdn.jsdelivr.net/gh/clawhub/image/diffuser/top/19/11/27/354734ea11c377033fc1b865572eff81.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="深入了解Redis【十六】集群机制之槽指派、重新分片、故障转移、主节点选举"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/10/16/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Redis%E3%80%90%E5%8D%81%E5%85%AD%E3%80%91%E9%9B%86%E7%BE%A4%E6%9C%BA%E5%88%B6%E4%B9%8B%E6%A7%BD%E6%8C%87%E6%B4%BE%E3%80%81%E9%87%8D%E6%96%B0%E5%88%86%E7%89%87%E3%80%81%E6%95%85%E9%9A%9C%E8%BD%AC%E7%A7%BB%E3%80%81%E4%B8%BB%E8%8A%82%E7%82%B9%E9%80%89%E4%B8%BE/" title="深入了解Redis【十六】集群机制之槽指派、重新分片、故障转移、主节点选举">深入了解Redis【十六】集群机制之槽指派、重新分片、故障转移、主节点选举</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-10-16T15:10:00.000Z" title="发表于 2019-10-16 23:10:00">2019-10-16</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/redis/">redis</a></span></div><div class="content">引言Redis集群通过分片进行数据共享，并且提供复制和故障转移功能。在学习主从复制和哨兵机制的时候，知道他们一个重要的缺点，动态扩容麻烦。Redis集群通过分片可以很轻松解决扩容问题，增加节点的时候，只需重新分片，相关槽转移即可，不影响redis集群对外提供服务。
1、节点节点通过CLUSTER MEET命令加入到集群，并通过Gossip协议传播加入集群的节点的信息，最终所有的节点都保存集群中所有节点的信息。Gossip协议是P2P网络的核心技术，也叫流行病协议，具有扩展性、容错、去中心化、最终一致性、简单等特点。传播过程是由其中一个节点发起，随机选择周围几个节点散播消息，收到消息的节点也重复该过程，最终所有节点都收到消息，适合实时性不高的系统。
2、槽指派Redis集群通过分片的方式保存数据库中的键值对，整个集群被分为16384个槽（slot）。数据通过CRC16计算hash，再对16384取模，获取到当前数据的目标槽，最后定位到负责该槽的节点信息。每个节点都存储了其他节点的槽信息，所以集群模式的时候，只需要连接一个节点即可。当执行命令的时候，如果当前数据正好在此节点上，则执行命令， ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2019/10/16/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Redis%E3%80%90%E5%8D%81%E4%BA%94%E3%80%91%E5%93%A8%E5%85%B5%E6%9C%BA%E5%88%B6%E4%B8%8E%E9%80%89%E4%B8%BE%E7%AE%97%E6%B3%95/" title="深入了解Redis【十五】哨兵机制与选举算法"><img class="post-bg" src="https://cdn.jsdelivr.net/gh/clawhub/image/diffuser/top/19/11/28/eef92308d51b2e055bc0640f2dac4bbf.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="深入了解Redis【十五】哨兵机制与选举算法"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/10/16/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Redis%E3%80%90%E5%8D%81%E4%BA%94%E3%80%91%E5%93%A8%E5%85%B5%E6%9C%BA%E5%88%B6%E4%B8%8E%E9%80%89%E4%B8%BE%E7%AE%97%E6%B3%95/" title="深入了解Redis【十五】哨兵机制与选举算法">深入了解Redis【十五】哨兵机制与选举算法</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-10-16T15:09:34.000Z" title="发表于 2019-10-16 23:09:34">2019-10-16</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/redis/">redis</a></span></div><div class="content">引言哨兵机制是基于主从模式实现，作用有两点：

监控master和slave是否正常运行
master出现故障时，自动将slave升级为master

哨兵的三个定时任务来源于：哨兵机制的原理
任务1每个哨兵节点每10秒会向主节点和从节点发送info命令获取最新的拓扑结构图,哨兵配置时只需要配置对主节点的监控即可，通过向主节点发送info，获取从节点的信息，并当有新的从节点加入时可以马上感知。
任务2每个哨兵节点每隔2秒会向redis数据节点的指定频道上（sentinel:hello）发送该哨兵节点对于主节点的判断以及当前哨兵节点的信息，同时每个哨兵节点也会订阅该频道，来了解其他哨兵节点的信息以及对主节点的判断。其实就是通过publish与subscribe来完成。
任务3每隔1秒每个哨兵会向主节点、从节点、其他哨兵发送ping命令，做心跳检测。
主观下线与客观下线主观下线当任务3心跳时间过长时，哨兵节点认为该节点下线。
客观下线当主观下线的节点时主节点时，该哨兵会联系其他哨兵对此主节点进行判断，大部分哨兵都统一下线时，次主节点为客观下线。
哨兵选举机制当redis主节点下线后，哨兵会 ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/11/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/#content-inner">11</a><span class="page-number current">12</span><a class="page-number" href="/page/13/#content-inner">13</a><span class="space">&hellip;</span><a class="page-number" href="/page/38/#content-inner">38</a><a class="extend next" rel="next" href="/page/13/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://cdn.jsdelivr.net/gh/clawhub/image/blog/avatar.gif" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">ClawHub</div><div class="author-info__description">ClawHub的技术分享，记录学习中的点点滴滴！</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">377</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">62</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">44</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/clawhub" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:clawhub@163.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">奋斗！</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/09/20/%E9%9A%8F%E7%AC%94/2023%E9%87%8D%E6%95%B4%E5%BE%85%E5%8F%91/" title="2023重整待发"><img src="https://cdn.jsdelivr.net/gh/clawhub/image/diffuser/top/19/11/27/04cde2146d3d116bc3a2cea0a22d8138.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="2023重整待发"/></a><div class="content"><a class="title" href="/2023/09/20/%E9%9A%8F%E7%AC%94/2023%E9%87%8D%E6%95%B4%E5%BE%85%E5%8F%91/" title="2023重整待发">2023重整待发</a><time datetime="2023-09-20T14:02:59.000Z" title="发表于 2023-09-20 22:02:59">2023-09-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/12/14/%E9%97%AE%E9%A2%98%E4%B8%8E%E8%A7%A3%E5%86%B3/%E5%BE%AE%E4%BF%A1%E7%B2%89%E4%B8%9D%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5%E4%BB%BB%E5%8A%A1%E5%BC%95%E8%B5%B7%E7%9A%84OOM%E8%AE%B0%E5%BD%95/" title="微信粉丝数据同步任务引起的OOM记录"><img src="https://cdn.jsdelivr.net/gh/ClawHub/image/image/photo-1696670639614-7596e371e20d%3Fcrop%3Dentropy%26cs%3Dtinysrgb%26fit%3Dcrop%26fm%3Djpg%26h%3D900%26ixid%3DMnwxfDB8MXxyYW5kb218MHxjb2xsZWN0aW9uaWR8fHx8fHx8MTY5NzAxNDE3OA%26ixlib%3Drb-4.0.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="微信粉丝数据同步任务引起的OOM记录"/></a><div class="content"><a class="title" href="/2022/12/14/%E9%97%AE%E9%A2%98%E4%B8%8E%E8%A7%A3%E5%86%B3/%E5%BE%AE%E4%BF%A1%E7%B2%89%E4%B8%9D%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5%E4%BB%BB%E5%8A%A1%E5%BC%95%E8%B5%B7%E7%9A%84OOM%E8%AE%B0%E5%BD%95/" title="微信粉丝数据同步任务引起的OOM记录">微信粉丝数据同步任务引起的OOM记录</a><time datetime="2022-12-14T08:29:54.000Z" title="发表于 2022-12-14 16:29:54">2022-12-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/12/12/%E9%97%AE%E9%A2%98%E4%B8%8E%E8%A7%A3%E5%86%B3/Excel%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E8%B6%85%E6%97%B6%E9%97%AE%E9%A2%98%E5%AE%9A%E4%BD%8D%E5%A4%87%E5%BF%98/" title="Excel文件上传超时问题定位备忘"><img src="https://cdn.jsdelivr.net/gh/ClawHub/image/image/photo-1695960826681-688cebd85ba9%3Fcrop%3Dentropy%26cs%3Dtinysrgb%26fit%3Dcrop%26fm%3Djpg%26h%3D900%26ixid%3DMnwxfDB8MXxyYW5kb218MHxjb2xsZWN0aW9uaWR8fHx8fHx8MTY5NzAxNDI5OQ%26ixlib%3Drb-4.0.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Excel文件上传超时问题定位备忘"/></a><div class="content"><a class="title" href="/2022/12/12/%E9%97%AE%E9%A2%98%E4%B8%8E%E8%A7%A3%E5%86%B3/Excel%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E8%B6%85%E6%97%B6%E9%97%AE%E9%A2%98%E5%AE%9A%E4%BD%8D%E5%A4%87%E5%BF%98/" title="Excel文件上传超时问题定位备忘">Excel文件上传超时问题定位备忘</a><time datetime="2022-12-12T08:38:54.000Z" title="发表于 2022-12-12 16:38:54">2022-12-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/12/01/Java/JAVA%E5%9F%BA%E7%A1%80/%E8%8E%B7%E5%8F%96%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8B%E6%89%80%E6%9C%89%E6%96%87%E4%BB%B6%E5%B9%B6%E6%89%B9%E9%87%8F%E6%9B%BF%E6%8D%A2%E6%96%87%E4%BB%B6%E5%86%85%E5%AD%97%E7%AC%A6%E4%B8%B2/" title="获取文件夹下所有文件并批量替换文件内字符串"><img src="https://cdn.jsdelivr.net/gh/ClawHub/image/image/photo-1695456164332-b9f6cd6e837c%3Fcrop%3Dentropy%26cs%3Dtinysrgb%26fit%3Dcrop%26fm%3Djpg%26h%3D900%26ixid%3DMnwxfDB8MXxyYW5kb218MHxjb2xsZWN0aW9uaWR8fHx8fHx8MTY5NzEwNDA1OQ%26ixlib%3Drb-4.0.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="获取文件夹下所有文件并批量替换文件内字符串"/></a><div class="content"><a class="title" href="/2022/12/01/Java/JAVA%E5%9F%BA%E7%A1%80/%E8%8E%B7%E5%8F%96%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8B%E6%89%80%E6%9C%89%E6%96%87%E4%BB%B6%E5%B9%B6%E6%89%B9%E9%87%8F%E6%9B%BF%E6%8D%A2%E6%96%87%E4%BB%B6%E5%86%85%E5%AD%97%E7%AC%A6%E4%B8%B2/" title="获取文件夹下所有文件并批量替换文件内字符串">获取文件夹下所有文件并批量替换文件内字符串</a><time datetime="2022-12-01T05:39:35.000Z" title="发表于 2022-12-01 13:39:35">2022-12-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/11/24/%E5%B7%A5%E5%85%B7/%E4%BD%BF%E7%94%A8Jasper%E7%94%BB%E6%89%93%E5%8D%B0%E6%A8%A1%E6%9D%BF/" title="使用Jasper画打印模板"><img src="https://cdn.jsdelivr.net/gh/ClawHub/image/image/photo-1695642579133-d41f36bcca61%253Fcrop%253Dentropy%2526cs%253Dtinysrgb%2526fit%253Dcrop%2526fm%253Djpg%2526h%253D900%2526ixid%253DMnwxfDB8MXxyYW5kb218MHxjb2xsZWN0aW9uaWR8fHx8fHx8MTY5NzAyOTY5NA%2526ixlib%253Drb-4.0.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="使用Jasper画打印模板"/></a><div class="content"><a class="title" href="/2022/11/24/%E5%B7%A5%E5%85%B7/%E4%BD%BF%E7%94%A8Jasper%E7%94%BB%E6%89%93%E5%8D%B0%E6%A8%A1%E6%9D%BF/" title="使用Jasper画打印模板">使用Jasper画打印模板</a><time datetime="2022-11-24T03:34:36.000Z" title="发表于 2022-11-24 11:34:36">2022-11-24</time></div></div></div></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/hexo/" style="font-size: 1.28em; color: rgb(98, 9, 12)">hexo</a><a href="/tags/Golang/" style="font-size: 1.39em; color: rgb(32, 137, 196)">Golang</a><a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/" style="font-size: 1.24em; color: rgb(195, 193, 107)">分布式</a><a href="/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/" style="font-size: 1.15em; color: rgb(48, 10, 73)">微服务</a><a href="/tags/node/" style="font-size: 1.32em; color: rgb(139, 71, 117)">node</a><a href="/tags/electron/" style="font-size: 1.32em; color: rgb(94, 4, 5)">electron</a><a href="/tags/vue/" style="font-size: 1.32em; color: rgb(175, 81, 2)">vue</a><a href="/tags/%E6%B5%8B%E8%AF%95/" style="font-size: 1.15em; color: rgb(193, 138, 189)">测试</a><a href="/tags/Postman/" style="font-size: 1.15em; color: rgb(19, 95, 103)">Postman</a><a href="/tags/Jasper/" style="font-size: 1.15em; color: rgb(176, 177, 122)">Jasper</a><a href="/tags/%E6%89%93%E5%8D%B0%E6%A8%A1%E6%9D%BF/" style="font-size: 1.15em; color: rgb(58, 183, 76)">打印模板</a><a href="/tags/Excel/" style="font-size: 1.15em; color: rgb(72, 38, 95)">Excel</a><a href="/tags/SQL/" style="font-size: 1.15em; color: rgb(135, 69, 64)">SQL</a><a href="/tags/%E5%BE%AE%E4%BF%A1/" style="font-size: 1.26em; color: rgb(20, 69, 31)">微信</a><a href="/tags/ElasticSearch/" style="font-size: 1.21em; color: rgb(13, 75, 34)">ElasticSearch</a><a href="/tags/SQL%E4%BC%98%E5%8C%96/" style="font-size: 1.17em; color: rgb(70, 56, 188)">SQL优化</a><a href="/tags/%E7%A6%8F%E5%88%A9/" style="font-size: 1.17em; color: rgb(101, 182, 105)">福利</a><a href="/tags/%E8%B5%84%E6%BA%90/" style="font-size: 1.15em; color: rgb(89, 42, 55)">资源</a><a href="/tags/%E9%9A%8F%E7%AC%94/" style="font-size: 1.19em; color: rgb(31, 96, 136)">随笔</a><a href="/tags/%E9%97%AE%E9%A2%98%E4%B8%8E%E8%A7%A3%E5%86%B3/" style="font-size: 1.26em; color: rgb(63, 120, 24)">问题与解决</a><a href="/tags/Excel%E4%B8%8A%E4%BC%A0/" style="font-size: 1.15em; color: rgb(52, 141, 109)">Excel上传</a><a href="/tags/OOM/" style="font-size: 1.17em; color: rgb(158, 196, 121)">OOM</a><a href="/tags/Map-computeIfAbsent/" style="font-size: 1.15em; color: rgb(5, 166, 171)">Map.computeIfAbsent</a><a href="/tags/Async/" style="font-size: 1.15em; color: rgb(69, 70, 8)">Async</a><a href="/tags/TransmittableThreadLocal/" style="font-size: 1.15em; color: rgb(93, 75, 163)">TransmittableThreadLocal</a><a href="/tags/Lists-partition/" style="font-size: 1.15em; color: rgb(151, 193, 24)">Lists.partition</a><a href="/tags/%E9%9D%A2%E8%AF%95/" style="font-size: 1.19em; color: rgb(44, 98, 81)">面试</a><a href="/tags/Java/" style="font-size: 1.45em; color: rgb(168, 126, 155)">Java</a><a href="/tags/JAVA%E5%9F%BA%E7%A1%80/" style="font-size: 1.41em; color: rgb(192, 40, 43)">JAVA基础</a><a href="/tags/java/" style="font-size: 1.17em; color: rgb(88, 190, 198)">java</a><a href="/tags/arthas/" style="font-size: 1.15em; color: rgb(192, 7, 116)">arthas</a><a href="/tags/%E6%B3%9B%E5%9E%8B/" style="font-size: 1.15em; color: rgb(108, 9, 177)">泛型</a><a href="/tags/java%E5%B9%B6%E5%8F%91%E5%AE%B9%E5%99%A8%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/" style="font-size: 1.34em; color: rgb(185, 138, 145)">java并发容器源码分析</a><a href="/tags/JAVA%E5%9F%BA%E7%A1%80%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/" style="font-size: 1.36em; color: rgb(76, 55, 31)">JAVA基础集合框架</a><a href="/tags/JVM/" style="font-size: 1.15em; color: rgb(83, 102, 25)">JVM</a><a href="/tags/java%E9%AB%98%E5%B9%B6%E5%8F%91/" style="font-size: 1.43em; color: rgb(64, 101, 48)">java高并发</a><a href="/tags/%E9%AB%98%E5%B9%B6%E5%8F%91/" style="font-size: 1.21em; color: rgb(185, 40, 97)">高并发</a><a href="/tags/%E4%B8%80%E9%94%AE%E5%88%86%E5%8F%91%E5%B9%B3%E5%8F%B0/" style="font-size: 1.15em; color: rgb(35, 132, 113)">一键分发平台</a><a href="/tags/Canal/" style="font-size: 1.15em; color: rgb(142, 190, 98)">Canal</a><a href="/tags/J2Cache/" style="font-size: 1.3em; color: rgb(139, 43, 175)">J2Cache</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/09/"><span class="card-archive-list-date">九月 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/12/"><span class="card-archive-list-date">十二月 2022</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/11/"><span class="card-archive-list-date">十一月 2022</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/07/"><span class="card-archive-list-date">七月 2022</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/06/"><span class="card-archive-list-date">六月 2022</span><span class="card-archive-list-count">8</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/05/"><span class="card-archive-list-date">五月 2022</span><span class="card-archive-list-count">11</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/04/"><span class="card-archive-list-date">四月 2022</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/01/"><span class="card-archive-list-date">一月 2022</span><span class="card-archive-list-count">2</span></a></li></ul></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2023 By ClawHub</div><div class="footer_custom_text">好好学习 天天向上</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"><script>window.typedJSFn = {
  init: (str) => {
    window.typed = new Typed('#subtitle', Object.assign({
      strings: str,
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50,
    }, null))
  },
  run: (subtitleType) => {
    if (true) {
      if (typeof Typed === 'function') {
        subtitleType()
      } else {
        getScript('https://cdn.jsdelivr.net/npm/typed.js/dist/typed.umd.min.js').then(subtitleType)
      }
    } else {
      subtitleType()
    }
  }
}
</script><script>function subtitleType () {
  if (true) {
    typedJSFn.init(["好好学习&#44;天天向上","good good study,day day up"])
  } else {
    document.getElementById("subtitle").textContent = "好好学习&#44;天天向上"
  }
}
typedJSFn.run(subtitleType)</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/algoliasearch/dist/algoliasearch-lite.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instantsearch.js/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js"></script></div></div></body></html>